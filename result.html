<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Quiz Result</title>
    <link rel="stylesheet" href="result.css">
</head>
<body>
    <div class="container">
        <h1>Quiz Result</h1>

        <p id="final-score"></p>
        <p id="total-question"></p>

        <button onclick="goHome()">Go Home</button>
    </div>

    <script>
    const score = parseInt(localStorage.getItem("score")) || 0
    const total = parseInt(localStorage.getItem("total")) || 0
    const timeTaken = parseInt(localStorage.getItem("timeTaken")) || 0
    const resultData = JSON.parse(localStorage.getItem("resultData")) || []

    const wrong = total - score
    const percent = Math.round((score / total) * 100)

    document.getElementById("final-score").textContent =
        `Correct Answers: ${score}`

    document.getElementById("total-question").textContent =
        `Wrong Answers: ${wrong}`

    const info = document.createElement("p")
    info.innerHTML = `
        <b>Percentage:</b> ${percent}% <br>
        <b>Time Taken:</b> ${timeTaken} seconds
    `
    document.querySelector(".container").appendChild(info)

    // Question wise result
    resultData.forEach((item, index) => {
        const div = document.createElement("div")
        div.style.marginTop = "15px"
        div.style.padding = "10px"
        div.style.borderRadius = "6px"

        let bg = "#f1f1f1"
        if (item.userAnswer === "Not Answered") bg = "#ffeeba"
        else if (item.userAnswer === item.correct) bg = "#d4edda"
        else bg = "#f8d7da"

        div.style.backgroundColor = bg

        div.innerHTML = `
            <h3>Q${index + 1}: ${item.question}</h3>
            <p><b>Your Answer:</b> ${item.userAnswer}</p>
            <p><b>Correct Answer:</b> ${item.correct}</p>
        `
        document.querySelector(".container").appendChild(div)
    })

    function goHome() {
        localStorage.clear()
        window.location.href = "index.html"
    }
</script>


</body>
</html>
